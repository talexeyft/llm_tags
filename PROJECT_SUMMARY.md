# LLM Tags - –ò—Ç–æ–≥–æ–≤–∞—è —Å–≤–æ–¥–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

## üìã –ß—Ç–æ —Å–æ–∑–¥–∞–Ω–æ

–£–ø—Ä–æ—â–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ç–µ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –æ–±—Ä–∞—â–µ–Ω–∏–π –∫–ª–∏–µ–Ω—Ç–æ–≤ –Ω–∞ –±–∞–∑–µ –ø—Ä–æ–µ–∫—Ç–∞ `llm_clustering`.

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
llm_tags/
‚îú‚îÄ‚îÄ llm_tags.py          # –û—Å–Ω–æ–≤–Ω–æ–π –º–æ–¥—É–ª—å (–≤—Å–µ –≤ –æ–¥–Ω–æ–º —Ñ–∞–π–ª–µ)
‚îú‚îÄ‚îÄ example.py           # –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
‚îú‚îÄ‚îÄ requirements.txt     # –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ README.md           # –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îú‚îÄ‚îÄ QUICKSTART.md       # –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
‚îú‚îÄ‚îÄ .gitignore          # Git ignore —Ñ–∞–π–ª
‚îî‚îÄ‚îÄ PROJECT_SUMMARY.md  # –≠—Ç–æ—Ç —Ñ–∞–π–ª
```

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### 1. –ö–ª–∞—Å—Å `OllamaLLM`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- –†–∞–±–æ—Ç–∞ —Å Ollama API
- –ú–µ—Ç–æ–¥ `tag_batch()` –¥–ª—è —Ç–µ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –±–∞—Ç—á–∞ –æ–±—Ä–∞—â–µ–Ω–∏–π
- –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `qwen2.5:32b`
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç JSON —Å —Ç–µ–≥–∞–º–∏ –∏ –æ–ø–∏—Å–∞–Ω–∏—è–º–∏

**–ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç urllib3 (–∫–∞–∫ –≤ llm_clustering)
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ç–µ–≥–æ–≤
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç–µ–≥–æ–≤

### 2. –ö–ª–∞—Å—Å `TaggingPipeline`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- –û—Å–Ω–æ–≤–Ω–æ–π –º–µ—Ç–æ–¥ `tag()` –¥–ª—è —Ç–µ–≥–∏—Ä–æ–≤–∞–Ω–∏—è DataFrame
- –ë–∞—Ç—á–∏–Ω–≥ (30-100 –æ–±—Ä–∞—â–µ–Ω–∏–π)
- –ú–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å (5 –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤)
- –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ CSV
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ç–µ–≥–æ–≤

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `skip_if_tags_count` - –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å —Å—Ç—Ä–æ–∫–∏ —Å >= N —Ç–µ–≥–æ–≤ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 10)
- `max_tags` - –º–∞–∫—Å–∏–º—É–º —Ç–µ–≥–æ–≤ –Ω–∞ –æ–±—Ä–∞—â–µ–Ω–∏–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 5)

## üîë –ö–ª—é—á–µ–≤—ã–µ –æ—Ç–ª–∏—á–∏—è –æ—Ç llm_clustering

### –£–ø—Ä–æ—â–µ–Ω–∏—è:
- ‚úÖ –í—Å–µ –≤ –æ–¥–Ω–æ–º —Ñ–∞–π–ª–µ (llm_tags.py)
- ‚úÖ –ù–µ—Ç –∏–µ—Ä–∞—Ä—Ö–∏–∏ —Ç–µ–≥–æ–≤
- ‚úÖ –ù–µ—Ç –∫–ª–∞—Å—Ç–µ—Ä–æ–≤ –∏ —Ä–µ–µ—Å—Ç—Ä–∞
- ‚úÖ –ù–µ—Ç –º–µ—Ç—Ä–∏–∫ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- ‚úÖ –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ –ø—Ä–æ–ø—É—Å–∫–∞ (–æ–¥–∏–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä)
- ‚úÖ –°–ª–æ–≤–∞—Ä—å —Ç–µ–≥–æ–≤ —Ç–æ–ª—å–∫–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è (–Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)

### –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ:
- ‚úÖ –ë–∞—Ç—á–∏–Ω–≥ (30-100 –æ–±—Ä–∞—â–µ–Ω–∏–π)
- ‚úÖ –ú–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å (5 –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤)
- ‚úÖ –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –ø—Ä–æ–≥–æ–Ω–∞
- ‚úÖ –†–∞–±–æ—Ç–∞ —Å Ollama —á–µ—Ä–µ–∑ urllib3
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –±–æ–ª—å—à–∏—Ö –¥–∞—Ç–∞—Å–µ—Ç–æ–≤

## üìä –§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö

### –í—Ö–æ–¥:
- DataFrame —Å –∫–æ–ª–æ–Ω–∫–æ–π `text`
- –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: `request_id`, `tags`

### –í—ã—Ö–æ–¥:
- DataFrame —Å –∏—Å—Ö–æ–¥–Ω—ã–º–∏ –∫–æ–ª–æ–Ω–∫–∞–º–∏ + `tags` (—Å—Ç—Ä–æ–∫–∞ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é)
- –°–ª–æ–≤–∞—Ä—å —Ç–µ–≥–æ–≤ `{tag_name: description}`

### –ö–µ—à:
- CSV —Ñ–∞–π–ª: `request_id, tags`

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```python
import pandas as pd
from llm_tags import TaggingPipeline

# –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö
df = pd.read_parquet("data.parquet")

# Pipeline
pipeline = TaggingPipeline()

# –ü—Ä–æ–º–ø—Ç
prompt = "–û–ø—Ä–µ–¥–µ–ª–∏ —Ç–µ–≥–∏ –¥–ª—è –æ–±—Ä–∞—â–µ–Ω–∏–π –∫–ª–∏–µ–Ω—Ç–æ–≤."

# –¢–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
result_df, tags_dict = pipeline.tag(
    df,
    text_column="text",
    tag_prompt=prompt
)

# –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
result_df.to_csv("tagged.csv", index=False)
```

## ‚öôÔ∏è –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### Pipeline:
- `batch_size=50` - —Ä–∞–∑–º–µ—Ä –±–∞—Ç—á–∞
- `num_workers=5` - –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –ø–æ—Ç–æ–∫–æ–≤
- `cache_dir="./cache"` - –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –∫–µ—à–∞

### –ú–µ—Ç–æ–¥ tag():
- `skip_if_tags_count=10` - –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å —Å >= 10 —Ç–µ–≥–æ–≤
- `max_tags=5` - –º–∞–∫—Å–∏–º—É–º 5 —Ç–µ–≥–æ–≤ –Ω–∞ –æ–±—Ä–∞—â–µ–Ω–∏–µ

## üìù –ü—Ä–∏–º–µ—Ä—ã

–§–∞–π–ª `example.py` —Å–æ–¥–µ—Ä–∂–∏—Ç 6 –ø—Ä–∏–º–µ—Ä–æ–≤:
1. –ë–∞–∑–æ–≤–æ–µ —Ç–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
2. –†–∞–±–æ—Ç–∞ —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ —Ç–µ–≥–∞–º–∏
3. –ü—Ä–æ–ø—É—Å–∫ —Ä–∞–∑–º–µ—á–µ–Ω–Ω—ã—Ö –æ–±—Ä–∞—â–µ–Ω–∏–π
4. –ü–µ—Ä–µ—Ä–∞–∑–º–µ—Ç–∫–∞ —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ–º
5. –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑ —Ñ–∞–π–ª–∞
6. –ö–∞—Å—Ç–æ–º–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Ollama

–ó–∞–ø—É—Å–∫:
```bash
python example.py
```

## üîß –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.10+
- pandas >= 2.0.0
- urllib3 >= 2.0.0
- Ollama —Å –º–æ–¥–µ–ª—å—é qwen2.5:32b

## üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **README.md** - –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- **QUICKSTART.md** - –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
- **example.py** - –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏

1. ‚úÖ –°–æ–∑–¥–∞–Ω llm_tags.py —Å –∫–ª–∞—Å—Å–∞–º–∏ OllamaLLM –∏ TaggingPipeline
2. ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∫–ª–∞—Å—Å OllamaLLM —Å –º–µ—Ç–æ–¥–æ–º tag_batch
3. ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω TaggingPipeline —Å –±–∞—Ç—á–∏–Ω–≥–æ–º –∏ –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å—é
4. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ skip_if_tags_count
5. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ CSV
6. ‚úÖ –°–æ–∑–¥–∞–Ω requirements.txt
7. ‚úÖ –°–æ–∑–¥–∞–Ω example.py —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏
8. ‚úÖ –°–æ–∑–¥–∞–Ω README.md —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π

## üéâ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

–ü—Ä–æ–µ–∫—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω —Å–æ–≥–ª–∞—Å–Ω–æ –ø–ª–∞–Ω—É –∏ –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é.

