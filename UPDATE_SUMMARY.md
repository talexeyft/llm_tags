# –°–≤–æ–¥–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π

## üéØ –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ç–µ–≥–æ–≤ –≤ –ø—Ä–æ–º–ø—Ç

‚úÖ –ù–∞–π–¥–µ–Ω–Ω—ã–µ —Ä–∞–Ω–µ–µ —Ç–µ–≥–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Å—Ç–∞–≤–ª—è—é—Ç—Å—è –≤ –ø—Ä–æ–º–ø—Ç –¥–ª—è LLM  
‚úÖ –ë–∞–∑–æ–≤—ã–π –ø—Ä–æ–º–ø—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–ª—å–∫–æ —Ç–æ, —á—Ç–æ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä `tag_prompt`  
‚úÖ –£–ø—Ä–æ—â–µ–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–º–ø—Ç–∞ - —É–±—Ä–∞–Ω—ã –∏–∑–±—ã—Ç–æ—á–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏  

### 2. –ì–∏–±–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –±–∞—Ç—á–µ–π

‚úÖ **num_workers=1**: –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –Ω–∞–∫–æ–ø–ª–µ–Ω–∏–µ–º —Ç–µ–≥–æ–≤  
‚úÖ **num_workers>1**: –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è  
‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç —Ä–µ–∂–∏–º —á–µ—Ä–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä `num_workers`  

### 3. –£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ markdown –±–ª–æ–∫–æ–≤ –∏–∑ –æ—Ç–≤–µ—Ç–∞ LLM  
‚úÖ –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞ JSON  
‚úÖ –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –æ—à–∏–±–æ–∫  

## üìä –†–µ–∂–∏–º—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏

### –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ (num_workers=1)

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- –ë–∞—Ç—á–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –æ–¥–∏–Ω –∑–∞ –¥—Ä—É–≥–∏–º
- –ö–∞–∂–¥—ã–π —Å–ª–µ–¥—É—é—â–∏–π –±–∞—Ç—á –≤–∏–¥–∏—Ç —Ç–µ–≥–∏ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö
- –¢–µ–≥–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞–∫–∞–ø–ª–∏–≤–∞—é—Ç—Å—è

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- –ü–µ—Ä–≤–∞—è –∏—Ç–µ—Ä–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö
- –°–æ–∑–¥–∞–Ω–∏–µ –Ω–∞—á–∞–ª—å–Ω–æ–≥–æ —Å–ª–æ–≤–∞—Ä—è —Ç–µ–≥–æ–≤
- –ö–æ–≥–¥–∞ –≤–∞–∂–Ω–∞ –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å

**–ü—Ä–∏–º–µ—Ä:**
```python
# –°–æ–∑–¥–∞–µ–º —Å–ª–æ–≤–∞—Ä—å —Ç–µ–≥–æ–≤ —Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å—é
pipeline = TaggingPipeline(llm=llm, num_workers=1)
result, tags = pipeline.tag(df, text_column="text", tag_prompt=prompt)
```

### –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ (num_workers>1)

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- –ù–µ—Å–∫–æ–ª—å–∫–æ –±–∞—Ç—á–µ–π –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
- –í—Å–µ –±–∞—Ç—á–∏ –ø–æ–ª—É—á–∞—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π –Ω–∞—á–∞–ª—å–Ω—ã–π —Å–ª–æ–≤–∞—Ä—å —Ç–µ–≥–æ–≤
- –ë—ã—Å—Ç—Ä–µ–µ, –Ω–æ –≤–æ–∑–º–æ–∂–Ω—ã –ø–æ—Ö–æ–∂–∏–µ —Ç–µ–≥–∏ –∏–∑ —Ä–∞–∑–Ω—ã—Ö –±–∞—Ç—á–µ–π

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- –ü–æ—Å–ª–µ–¥—É—é—â–∏–µ –∏—Ç–µ—Ä–∞—Ü–∏–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏
- –ö–æ–≥–¥–∞ —Å–ª–æ–≤–∞—Ä—å —Ç–µ–≥–æ–≤ —É–∂–µ –Ω–∞–∫–æ–ø–ª–µ–Ω
- –ö–æ–≥–¥–∞ —Å–∫–æ—Ä–æ—Å—Ç—å –≤–∞–∂–Ω–µ–µ –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏

**–ü—Ä–∏–º–µ—Ä:**
```python
# –ë—ã—Å—Ç—Ä–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ —Ç–µ–≥–∞–º–∏
pipeline = TaggingPipeline(llm=llm, num_workers=5)
result, tags = pipeline.tag(
    df, 
    text_column="text", 
    tag_prompt=prompt,
    existing_tags=previous_tags  # –ü–µ—Ä–µ–¥–∞–µ–º –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω—ã–µ —Ç–µ–≥–∏
)
```

## üöÄ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è

### –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ —Å–ª–æ–≤–∞—Ä—è —Ç–µ–≥–æ–≤ (–ø–µ—Ä–≤–∞—è –∏—Ç–µ—Ä–∞—Ü–∏—è)

```python
from llm_tags import TaggingPipeline, OllamaLLM
import json

# –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É
llm = OllamaLLM()
pipeline = TaggingPipeline(llm=llm, batch_size=50, num_workers=1)

# –ü—Ä–æ—Å—Ç–æ–π –ø—Ä–æ–º–ø—Ç - —Ç–æ–ª—å–∫–æ –≤–∞—à–∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
prompt = """–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π –æ–±—Ä–∞—â–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–æ–≤ —Ç–µ–ª–µ–∫–æ–º-–æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ –∏ –æ–ø—Ä–µ–¥–µ–ª–∏ —Ç–µ–≥–∏.
–¢–µ–≥–∏ –¥–æ–ª–∂–Ω—ã –æ—Ç—Ä–∞–∂–∞—Ç—å –æ—Å–Ω–æ–≤–Ω—É—é —Ç–µ–º—É –æ–±—Ä–∞—â–µ–Ω–∏—è."""

# –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ
result_df, tags_dict = pipeline.tag(
    df,
    text_column="text",
    tag_prompt=prompt,
    max_tags=3
)

# –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å–ª–æ–≤–∞—Ä—å —Ç–µ–≥–æ–≤
with open("tags_dict.json", "w", encoding="utf-8") as f:
    json.dump(tags_dict, f, ensure_ascii=False, indent=2)

print(f"–°–æ–∑–¥–∞–Ω —Å–ª–æ–≤–∞—Ä—å –∏–∑ {len(tags_dict)} —Ç–µ–≥–æ–≤")
```

### –®–∞–≥ 2: –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö (–ø–æ—Å–ª–µ–¥—É—é—â–∏–µ –∏—Ç–µ—Ä–∞—Ü–∏–∏)

```python
import json
from llm_tags import TaggingPipeline, OllamaLLM

# –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–ª–æ–≤–∞—Ä—å —Ç–µ–≥–æ–≤
with open("tags_dict.json", "r", encoding="utf-8") as f:
    existing_tags = json.load(f)

# –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É –¥–ª—è —Å–∫–æ—Ä–æ—Å—Ç–∏
llm = OllamaLLM()
pipeline = TaggingPipeline(llm=llm, batch_size=50, num_workers=5)

# –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –Ω–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ —Ç–µ–≥–∞–º–∏
result_df, tags_dict = pipeline.tag(
    new_df,
    text_column="text",
    tag_prompt=prompt,
    existing_tags=existing_tags,  # –ü–µ—Ä–µ–¥–∞–µ–º –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω—ã–µ —Ç–µ–≥–∏
    max_tags=3
)

# –û–±–Ω–æ–≤–ª—è–µ–º —Å–ª–æ–≤–∞—Ä—å —Ç–µ–≥–æ–≤
with open("tags_dict.json", "w", encoding="utf-8") as f:
    json.dump(tags_dict, f, ensure_ascii=False, indent=2)

print(f"–°–ª–æ–≤–∞—Ä—å –æ–±–Ω–æ–≤–ª–µ–Ω, –≤—Å–µ–≥–æ —Ç–µ–≥–æ–≤: {len(tags_dict)}")
```

## üìÅ –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã

1. **BATCH_PROCESSING_GUIDE.md** - –ø–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –æ–±—Ä–∞–±–æ—Ç–∫–µ –±–∞—Ç—á–µ–π
2. **demo_sequential_vs_parallel.py** - –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Ä–∞–∑–Ω–∏—Ü—ã –º–µ–∂–¥—É —Ä–µ–∂–∏–º–∞–º–∏
3. **show_prompt_example.py** - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ–º–ø—Ç–∞
4. **test_new_prompt.py** - —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç—É —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ —Ç–µ–≥–∞–º–∏

## üéì –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –û–±—Ä–∞–±–æ—Ç–∫–∞ –±–æ–ª—å—à–æ–≥–æ –¥–∞—Ç–∞—Å–µ—Ç–∞

```python
# –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –ø–µ—Ä–≤—É—é —á–∞—Å—Ç—å –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ
pipeline = TaggingPipeline(llm=llm, num_workers=1)
result1, tags1 = pipeline.tag(df_part1, text_column="text", tag_prompt=prompt)

# –û—Å—Ç–∞–ª—å–Ω—ã–µ —á–∞—Å—Ç–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ
pipeline = TaggingPipeline(llm=llm, num_workers=5)
result2, tags2 = pipeline.tag(df_part2, text_column="text", tag_prompt=prompt, existing_tags=tags1)
result3, tags3 = pipeline.tag(df_part3, text_column="text", tag_prompt=prompt, existing_tags=tags2)

# –û–±—ä–µ–¥–∏–Ω—è–µ–º
result_df = pd.concat([result1, result2, result3])
```

### –ü—Ä–∏–º–µ—Ä 2: –ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞

```python
# –î–µ–Ω—å 1: —Å–æ–∑–¥–∞–µ–º —Å–ª–æ–≤–∞—Ä—å
pipeline = TaggingPipeline(llm=llm, num_workers=1)
result1, tags1 = pipeline.tag(df_day1, text_column="text", tag_prompt=prompt)

# –î–µ–Ω—å 2+: –∏—Å–ø–æ–ª—å–∑—É–µ–º –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω—ã–µ —Ç–µ–≥–∏
pipeline = TaggingPipeline(llm=llm, num_workers=5)
result2, tags2 = pipeline.tag(df_day2, text_column="text", tag_prompt=prompt, existing_tags=tags1)
result3, tags3 = pipeline.tag(df_day3, text_column="text", tag_prompt=prompt, existing_tags=tags2)
```

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

| –ü–∞—Ä–∞–º–µ—Ç—Ä | num_workers=1 | num_workers=5 |
|----------|---------------|---------------|
| –°–∫–æ—Ä–æ—Å—Ç—å | 1x | ~4-5x –±—ã—Å—Ç—Ä–µ–µ |
| –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å —Ç–µ–≥–æ–≤ | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê |
| –ù–∞–∫–æ–ø–ª–µ–Ω–∏–µ —Ç–µ–≥–æ–≤ | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ | –ß–µ—Ä–µ–∑ existing_tags |
| –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ CPU | –ù–∏–∑–∫–æ–µ | –í—ã—Å–æ–∫–æ–µ |
| –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è | –ü–µ—Ä–≤–æ–π –∏—Ç–µ—Ä–∞—Ü–∏–∏ | –ü–æ—Å–ª–µ–¥—É—é—â–∏—Ö –∏—Ç–µ—Ä–∞—Ü–∏–π |

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø—Ä–æ–º–ø—Ç–∞:
```bash
python show_prompt_example.py
```

### –¢–µ—Å—Ç —Å —Ä–µ–∞–ª—å–Ω–æ–π LLM:
```bash
python test_new_prompt.py
```

### –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ä–µ–∂–∏–º–æ–≤ –æ–±—Ä–∞–±–æ—Ç–∫–∏:
```bash
python demo_sequential_vs_parallel.py
```

## ‚úÖ –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

–í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ–±—Ä–∞—Ç–Ω–æ —Å–æ–≤–º–µ—Å—Ç–∏–º—ã:
- API –Ω–µ –∏–∑–º–µ–Ω–∏–ª—Å—è
- –í—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å–∫—Ä–∏–ø—Ç—ã –ø—Ä–æ–¥–æ–ª–∂–∞—Ç —Ä–∞–±–æ—Ç–∞—Ç—å
- –§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ –æ—Å—Ç–∞–ª—Å—è –ø—Ä–µ–∂–Ω–∏–º
- –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é `num_workers=5` (–∫–∞–∫ –±—ã–ª–æ —Ä–∞–Ω—å—à–µ)

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **BATCH_PROCESSING_GUIDE.md** - –ø–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –æ–±—Ä–∞–±–æ—Ç–∫–µ –±–∞—Ç—á–µ–π
- **CHANGELOG.md** - –ø–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
- **CHANGES_SUMMARY.md** - —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Å–≤–æ–¥–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- **–†–ï–ó–Æ–ú–ï_–ò–ó–ú–ï–ù–ï–ù–ò–ô.md** - –∫—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ –Ω–∞ —Ä—É—Å—Å–∫–æ–º

---

**–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** 30 –Ω–æ—è–±—Ä—è 2025  
**–í–µ—Ä—Å–∏—è:** 1.2  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

